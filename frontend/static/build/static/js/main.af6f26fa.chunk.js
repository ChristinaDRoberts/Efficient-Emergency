(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(31)},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(18),i=a.n(c),r=(a(29),a(7)),o=a(8),s=a(10),u=a(9),m=a(11),h=a(15),p=a(35),d=a(32),g=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={callList:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/dispatchcall/").then(function(e){return 200!==e.status&&console.log("problem"),e.json()}).then(function(t){Object(h.a)(e.state.callList).push(t),console.log("json",t),e.setState({callList:t})})}},{key:"render",value:function(){return l.a.createElement(f,{callList:this.state.callList,route:this.props.route})}}]),t}(n.Component),b=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleToggle=function(e){a.setState({active:!a.state.active})},a.state={active:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.call;return l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-body"},l.a.createElement("p",null,"Call #:",t.id),l.a.createElement("p",null,"Phone:",t.phone),l.a.createElement(p.a,{onClick:this.handleToggle},"Show Images"),l.a.createElement("ul",{className:this.state.active?"":"d-none",id:"image-drop-down"},l.a.createElement("li",null,t.scene_images.map(function(e,t){return l.a.createElement(d.a,{className:"img-thumbnail",key:t,src:e.image})}),l.a.createElement(p.a,{onClick:function(a){e.props.route("dispatcherCallsDetail",t)}},"See/Send Call Detail Page")))))}}]),t}(n.Component),f=function(e){function t(e){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.callList.map(function(t){return l.a.createElement(b,{key:t.id,call:t,route:e.props.route})});return l.a.createElement("div",null,l.a.createElement("div",{className:"topDispatch"},l.a.createElement("h2",null,"Welcome Dispatcher ! Create A New Call, Or Revisit Previous Calls"),l.a.createElement(p.a,{variant:"danger",className:"switch",onClick:function(t){e.props.route("callCreate")}},"Start A Call")),l.a.createElement("div",{className:"card-columns"},t))}}]),t}(n.Component),v=a(6),E=a(34),C=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={image_preview:"",imageCollection:[],image:""},a.handleImage=a.handleImage.bind(Object(v.a)(Object(v.a)(a))),a.submitImage=a.submitImage.bind(Object(v.a)(Object(v.a)(a))),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleImage",value:function(e){var t=this;e.preventDefault();var a=e.target.files[0],n=new FileReader;n.onloadend=function(){return t.setState({image_preview:n.result})},n.readAsDataURL(a),this.setState({image:a})}},{key:"submitImage",value:function(e){var t=this;e.preventDefault();var a=new FormData;a.append("image",this.state.image),a.append("imageCollection",JSON.stringify(this.state.imageCollection)),a.append("dispatchCall",JSON.stringify(this.props.dispatchCallId)),a.forEach(function(e,t){console.log("key %s: value %s",t,e)}),fetch("/api/scene/",{method:"POST",body:a}).then(function(e){return e.json()}).then(function(e){var a=Object(h.a)(t.state.imageCollection);a.push(e),t.setState({imageCollection:a}),t.setState({image_preview:""}),console.log("added",a)})}},{key:"render",value:function(){var e=this.state.imageCollection.map(function(e){return l.a.createElement("li",{className:"scene-photo-li",key:e.id},l.a.createElement("img",{src:e.image,alt:""}))});return l.a.createElement("div",{className:"scene-div"},l.a.createElement("h1",{className:"please-submit-photo"},"Please Submit A Photo To Emergency Services"),l.a.createElement(E.a,{onSubmit:this.submitImage},l.a.createElement("img",{className:"scene-photos",src:this.state.image_preview,alt:"..."}),l.a.createElement("input",{className:"scene-input",type:"file",onChange:this.handleImage,name:"image"}),l.a.createElement(p.a,{className:"submitImageButtonScene",type:"submit",variant:"secondary"},"Submit This Image !")),l.a.createElement("div",null,l.a.createElement("ul",{className:"scene-photo-ul"},e)))}}]),t}(n.Component),j=a(21),O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).createCall=function(e){e.preventDefault();var t={phone:a.state.phone},n={method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"})};fetch("/api/dispatchcall/",n).then(function(e){return 201!==e.status&&console.log("problem"),e.json()}).then(function(e){console.log("json",e),a.setState({dispatchInfo:e}),a.intervalId=setInterval(function(){return a.updateDispatchImages()},1e4),a.updateDispatchImages()})},a.sendTextMessage=function(e){e.preventDefault();var t=new FormData;t.append("phone",a.state.phone);var n={method:"POST",body:t};fetch("/api/sendtext/".concat(a.state.dispatchInfo.id,"/"),n).then(function(e){return e.text()}).then(function(e){console.log(e)})},a.componentWillUnmount=function(e){clearInterval(a.intervalId)},a.handlePhoneNumber=function(e){console.log(e.target.name,e.target.value),a.setState(Object(j.a)({},e.target.name,e.target.value))},a.state={phone:"",dispatchInfo:{id:""},imageCollection:[],baseURL:"https://dashboard.heroku.com/apps/efficient-emergency/dispatchcall/"},a.handlePhoneNumber=a.handlePhoneNumber.bind(Object(v.a)(Object(v.a)(a))),a.createCall=a.createCall.bind(Object(v.a)(Object(v.a)(a))),a.updateDispatchImages=a.updateDispatchImages.bind(Object(v.a)(Object(v.a)(a))),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"updateDispatchImages",value:function(e){var t=this;console.log("update images"),this.state.dispatchInfo.id&&fetch("/api/dispatchcall/".concat(this.state.dispatchInfo.id,"/scene/")).then(function(e){return 200!==e.status&&console.log("problem"),e.json()}).then(function(e){t.setState({imageCollection:e}),console.log("json",e)})}},{key:"render",value:function(){var e=this,t=this.state.imageCollection.map(function(e){return l.a.createElement("li",{key:e.id},l.a.createElement("img",{src:e.image,alt:""}))});return l.a.createElement("div",null,l.a.createElement("h2",null,"Dispatch Current Create Call Page"),l.a.createElement(E.a,{onSubmit:this.createCall},l.a.createElement("label",{htmlFor:"phone"},"Enter callers phone number:"),l.a.createElement("input",{type:"tel",id:"phone",name:"phone",placeholder:"Format: 123-456-7890",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",required:!0,value:this.state.phone,onChange:this.handlePhoneNumber}),l.a.createElement("br",null),l.a.createElement(p.a,{className:"createCallButton",type:"submit",variant:"secondary"},"Create This Call Record")),l.a.createElement("p",null," ",this.state.phone),l.a.createElement("a",{href:"#"}," https://efficient-emergency.herokuapp.com/dispatchcall/",this.state.dispatchInfo.id,"/scene"),l.a.createElement(p.a,{className:"sendText",type:"submit",variant:"secondary",onClick:this.sendTextMessage},"SEND LINK THROUGH TEXT"),l.a.createElement("div",{className:"imagesFromClient"},l.a.createElement("ul",null,t)),l.a.createElement(p.a,{className:"endCall",onClick:function(t){e.props.route("/dispatchcall/")}},"End Call"))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={calls:[],specificCall:{},dispatchCall:119},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/dispatchcall/").then(function(e){return 200!==e.status&&console.log("problem"),e.json()}).then(function(t){e.setState({calls:t}),console.log("Calls available",t)})}},{key:"render",value:function(){var e=this.props.data;return l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement("li",{key:e.id},l.a.createElement("img",{src:e.image,alt:""}),l.a.createElement("p",null,e.id," call id"),l.a.createElement("p",null,e.phone," call phone"),l.a.createElement("p",null,e.date," call date"),l.a.createElement("p",null,e.scene_images.map(function(e){return l.a.createElement(d.a,{src:e.image})})))),l.a.createElement(I,{route:this.props.route}))}}]),t}(n.Component),I=function(e){function t(e){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(p.a,null,"Send Detail Page To Prisma Trauma ",l.a.createElement("p",null,"864-111-2222")),l.a.createElement(p.a,null,"Send Call Detail Page To GC EMS ",l.a.createElement("p",null,"864-333-4444")),l.a.createElement(p.a,null,"Send Call Detail Page To Thorne Ambulance ",l.a.createElement("p",null,"864-555-7777"))),l.a.createElement(p.a,{onClick:function(t){e.props.route("/dispatchcall/")}},"Return To Call List Page "))}}]),t}(n.Component),S=(a(30),a(33)),w=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).route=function(e,t){a.setState({currentScreen:{pathname:e},data:t})},a.state={currentScreen:window.location,data:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return console.log("TESTING",this.state.currentScreen.pathname),l.a.createElement("div",null,l.a.createElement(S.a,{className:"Fluid"},function(){switch(e.state.currentScreen.pathname){case"/dispatchcall/":return l.a.createElement(g,{route:e.route});case"dispatcherCallsDetail":return l.a.createElement(y,{route:e.route,data:e.state.data});case"callCreate":return l.a.createElement(O,{route:e.route,imageCollection:e.state.imageCollection,image_preview:e.state.image_preview});default:var t=window.location.pathname.split("/"),a=parseInt(t[2]);return console.log("dispatchId",a),l.a.createElement(C,{route:e.route,handleImage:e.handleImage,imageCollection:e.state.imageCollection,submitImage:e.submitImage,image:e.state.image,image_preview:e.state.image_preview,dispatchCallId:a})}}()))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.af6f26fa.chunk.js.map