(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{46:function(e,a,t){e.exports=t(77)},52:function(e,a,t){},76:function(e,a,t){},77:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(14),s=t.n(c),i=(t(52),t(6)),o=t(7),r=t(9),m=t(8),u=t(10),d=t(24),p=t(83),h=t(82),b=t(78),g=window.$,v=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(r.a)(this,Object(m.a)(a).call(this,e))).state={callList:[]},t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/dispatchcall/").then(function(e){return 200!==e.status&&console.log("problem"),e.json()}).then(function(a){Object(d.a)(e.state.callList).push(a),console.log("json",a),e.setState({callList:a})})}},{key:"render",value:function(){return l.a.createElement(f,{callList:this.state.callList,route:this.props.route})}}]),a}(n.Component),E=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(r.a)(this,Object(m.a)(a).call(this,e))).handleClose=function(e){t.setState({active:!1})},t.handleToggle=function(e){t.setState({active:!t.state.active})},t.state={active:!1},t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this,a=this.props.call;return l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-body call-list-card"},l.a.createElement("p",null,"Call #:",a.id),l.a.createElement("p",null,"Phone:",a.phone),l.a.createElement(p.a,{className:"btn btn-secondary",onClick:this.handleToggle},"Show Images"),l.a.createElement(h.a,{show:this.state.active,onHide:this.handleClose},l.a.createElement(h.a.Header,{closeButton:!0},l.a.createElement(h.a.Title,null,"Scene Images")),l.a.createElement(h.a.Body,null,l.a.createElement("ul",{id:"image-drop-down"},l.a.createElement("li",null,a.scene_images.map(function(e,a){return l.a.createElement(b.a,{className:"img-thumbnail",key:a,src:e.image})}))))),l.a.createElement(p.a,{className:"btn btn-outline-dark",onClick:function(t){e.props.route("/dispatchcall/".concat(a.id,"/"),a)}},"See/Send Call Detail Page")))}}]),a}(n.Component),f=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(r.a)(this,Object(m.a)(a).call(this,e))).componentDidMount=function(e){g(document).ready(function(){g("#sidebarCollapse").on("click",function(){g("#sidebar").toggleClass("active"),g(this).toggleClass("active")})})},t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this,a=this.props.callList.map(function(a){return l.a.createElement(E,{key:a.id,call:a,route:e.props.route})});return l.a.createElement("div",null,l.a.createElement("div",{className:"topDispatch"},l.a.createElement("h2",{className:"wecome-dispatcher"},"Create A New Call Or Revisit Previous Calls"),l.a.createElement("div",null,l.a.createElement("div",{className:"faux-nav row wrapper2"},l.a.createElement("nav",{id:"sidebar",className:"Row"},l.a.createElement("ul",{className:"list-unstyled components"},l.a.createElement("li",{className:"active nav-li"},l.a.createElement(p.a,{variant:"danger",className:"switch btn-outline-light",onClick:function(a){e.props.route("/dispatchcall/")}},"Call List")),l.a.createElement("li",{className:"nav-start-call nav-li"},l.a.createElement(p.a,{variant:"danger",className:"switch btn-outline-light",onClick:function(a){e.props.route("/callCreate\\/")}},"Start A Call")),l.a.createElement("li",{className:"nav-logout nav-li"},l.a.createElement("button",{className:"btn btn-light logout logout-calllist"},l.a.createElement("a",{className:"logout-button",href:"https://efficient-emergency.herokuapp.com/"},"Click to Logout"))))),l.a.createElement("div",{id:"content"},l.a.createElement("button",{type:"button",id:"sidebarCollapse",className:"navbar-btn"},l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null)))))),l.a.createElement("div",{className:"card-columns"},a))}}]),a}(n.Component),N=t(11),C=t(79),k=t(81),O=(window.$,function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(r.a)(this,Object(m.a)(a).call(this,e))).state={image_preview:"",imageCollection:[],image:""},t.handleImage=t.handleImage.bind(Object(N.a)(Object(N.a)(t))),t.submitImage=t.submitImage.bind(Object(N.a)(Object(N.a)(t))),t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"handleImage",value:function(e){var a=this;e.preventDefault();var t=e.target.files[0],n=new FileReader;n.onloadend=function(){return a.setState({image_preview:n.result})},n.readAsDataURL(t),this.setState({image:t})}},{key:"submitImage",value:function(e){var a=this;e.preventDefault();var t=new FormData;t.append("image",this.state.image),t.append("imageCollection",JSON.stringify(this.state.imageCollection)),t.append("dispatchCall",JSON.stringify(this.props.dispatchCallId)),t.forEach(function(e,a){console.log("key %s: value %s",a,e)}),fetch("/api/scene/",{method:"POST",body:t}).then(function(e){return e.json()}).then(function(e){var t=Object(d.a)(a.state.imageCollection);t.push(e),a.setState({imageCollection:t}),a.setState({image_preview:""}),console.log("added",t)})}},{key:"render",value:function(){console.log(this.state.image_preview);var e,a=this.state.imageCollection.map(function(e){return l.a.createElement("li",{className:"scene-photo-li",key:e.id},l.a.createElement("img",{src:e.image,alt:""}))});return e=this.state.image_preview?l.a.createElement("img",{className:"scene-photos ",src:this.state.image_preview,alt:"..."}):l.a.createElement("img",{className:"scene-photos ",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTxJTbMY80oe9BRR3ykDS7V3L_IUZT-1ZTVzTyptew3F4N2UCYseA",alt:"..."}),l.a.createElement("div",{className:"scene-div col-xs-12 col-sm-10 col-lg-8 align-self-center"},l.a.createElement(C.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h1",{className:"please-submit-photo"},"Please Submit A Photo To Emergency Services"))),l.a.createElement("div",{className:"row align-items-start image-box-div"},l.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 imagebox"},l.a.createElement(k.a,{className:"client-form",onSubmit:this.submitImage},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-12"},e,l.a.createElement("input",{className:"scene-input",type:"file",onChange:this.handleImage,name:"image"}))),l.a.createElement(p.a,{className:"submitImageButtonScene",type:"submit",variant:"secondary"},"Submit Image")))),l.a.createElement("div",{className:" row align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("ul",{className:"scene-photo-ul card-columns"},a))),l.a.createElement("button",{className:"btn btn-light logout"},l.a.createElement("a",{className:"logout-button",href:"https://thiswayup.org.au/how-do-you-feel/traumatised/"},"Resources To Help Cope")))}}]),a}(n.Component)),j=t(45),w=window.$,y=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(r.a)(this,Object(m.a)(a).call(this,e))).createCall=function(e){e.preventDefault();var a={phone:t.state.phone},n={method:"POST",body:JSON.stringify(a),headers:new Headers({"Content-Type":"application/json"})};fetch("/api/dispatchcall/",n).then(function(e){return 201!==e.status&&console.log("problem"),e.json()}).then(function(e){console.log("json",e),t.setState({dispatchInfo:e}),t.intervalId=setInterval(function(){return t.updateDispatchImages()},1e4),t.updateDispatchImages()})},t.sendTextMessage=function(e){e.preventDefault();var a=new FormData;a.append("phone",t.state.phone);var n={method:"POST",body:a};fetch("/api/sendtext/".concat(t.state.dispatchInfo.id,"/"),n).then(function(e){return e.text()}).then(function(e){console.log(e)})},t.componentWillUnmount=function(e){clearInterval(t.intervalId)},t.handlePhoneNumber=function(e){console.log(e.target.name,e.target.value),t.setState(Object(j.a)({},e.target.name,e.target.value))},t.componentDidMount=function(e){w(document).ready(function(){w("#sidebarCollapse").on("click",function(){w("#sidebar").toggleClass("active"),w(this).toggleClass("active")})})},t.state={phone:"",dispatchInfo:{id:""},imageCollection:[],baseURL:"https://dashboard.heroku.com/apps/efficient-emergency/dispatchcall/"},t.handlePhoneNumber=t.handlePhoneNumber.bind(Object(N.a)(Object(N.a)(t))),t.createCall=t.createCall.bind(Object(N.a)(Object(N.a)(t))),t.updateDispatchImages=t.updateDispatchImages.bind(Object(N.a)(Object(N.a)(t))),t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"updateDispatchImages",value:function(e){var a=this;console.log("update images"),this.state.dispatchInfo.id&&fetch("/api/dispatchcall/".concat(this.state.dispatchInfo.id,"/scene/")).then(function(e){return 200!==e.status&&console.log("problem"),e.json()}).then(function(e){a.setState({imageCollection:e}),console.log("json",e)})}},{key:"render",value:function(){var e=this,a=this.state.imageCollection.map(function(e){return l.a.createElement("li",{key:e.id},l.a.createElement("img",{src:e.image,alt:""}))});return l.a.createElement("div",{className:"callCreateMain"},l.a.createElement("h2",{className:"create-title"},"Create Active Call and Send Text Message With Link To Submit Photos"),l.a.createElement("div",null,l.a.createElement("div",{className:"wrapper2 row faux-nav"},l.a.createElement("nav",{id:"sidebar",className:"Row"},l.a.createElement("ul",{className:"list-unstyled components"},l.a.createElement("li",{className:"active"},l.a.createElement(p.a,{variant:"danger",className:"switch btn-outline-light",onClick:function(a){e.props.route("/dispatchcall/")}},"Call List")),l.a.createElement("li",{className:"nav-start-call"},l.a.createElement(p.a,{variant:"danger",className:"switch btn-outline-light",onClick:function(a){e.props.route("/callCreate\\/")}},"Start A Call")),l.a.createElement("li",{className:"nav-logout"},l.a.createElement("button",{className:"btn btn-light logout logout-calllist"},l.a.createElement("a",{className:"logout-button",href:"https://efficient-emergency.herokuapp.com/"},"Click to Logout"))))),l.a.createElement("div",{id:"content"},l.a.createElement("button",{type:"button",id:"sidebarCollapse",className:"navbar-btn"},l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null))))),l.a.createElement(k.a,{onSubmit:this.createCall},l.a.createElement("label",{className:"label-phone",htmlFor:"phone"},"Enter callers phone number:"),l.a.createElement("input",{className:"input-phone",type:"tel",id:"phone",name:"phone",placeholder:"Format: 123-456-7890",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",required:!0,value:this.state.phone,onChange:this.handlePhoneNumber}),l.a.createElement("br",null),l.a.createElement(p.a,{className:"createCallButton",type:"submit",variant:"secondary"},"Create This Call Record")),l.a.createElement(p.a,{className:"sendText",type:"submit",variant:"secondary",onClick:this.sendTextMessage},"SEND LINK THROUGH TEXT"),l.a.createElement("p",{className:"link-to-text",href:"#"}," https://efficient-emergency.herokuapp.com/dispatchcall/",this.state.dispatchInfo.id,"/scene"),l.a.createElement("div",{className:"imagesFromClient card-columns"},l.a.createElement("ul",null,a)))}}]),a}(n.Component),S=window.$,I=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(r.a)(this,Object(m.a)(a).call(this,e))).componentDidMount=function(e){t.props.data.id||console.log("pk",t.props.pk),S(document).ready(function(){S("#sidebarCollapse").on("click",function(){S("#sidebar").toggleClass("active"),S(this).toggleClass("active")})})},console.log("props available to DispcallsDetcont",t.props),t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this,a=this.props.data;return console.log("this props here",this.props.data),this.props.data.id?l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("div",{className:"wrapper2 row faux-nav"},l.a.createElement("nav",{id:"sidebar",className:"Row"},l.a.createElement("ul",{className:"list-unstyled components"},l.a.createElement("li",{className:"active"},l.a.createElement(p.a,{variant:"danger",className:"switch btn-outline-light",onClick:function(a){e.props.route("/dispatchcall/")}},"Call List")),l.a.createElement("li",{className:"nav-start-call"},l.a.createElement(p.a,{variant:"danger",className:"switch btn-outline-light",onClick:function(a){e.props.route("/callCreate\\/")}},"Start A Call")),l.a.createElement("li",{className:"nav-logout"},l.a.createElement("button",{className:"btn btn-light switch logout-calllist"},l.a.createElement("a",{className:"logout-button",href:"https://efficient-emergency.herokuapp.com/"},"Click to Logout"))))),l.a.createElement("div",{id:"content"},l.a.createElement("button",{type:"button",id:"sidebarCollapse",className:"navbar-btn"},l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null))))),l.a.createElement("ul",null,l.a.createElement("li",{key:a.id,className:"detail-li"},l.a.createElement("h3",{className:"detail-detail"},l.a.createElement("strong",null,"Call ID #: "),a.id," "),l.a.createElement("h3",{className:"detail-detail"},l.a.createElement("strong",null,"Caller Phone # : "),a.phone),l.a.createElement("h3",{className:"detail-detail"},l.a.createElement("strong",null,"Call Date: "),a.date),l.a.createElement("h3",{className:"detail-detail"},l.a.createElement("strong",null,"Dispatcher: "),a.user.username),l.a.createElement("h3",{className:"images-provider-detail-page"},a.scene_images.map(function(a){return l.a.createElement(D,{key:a.id,specificCall:e.props.data,image:a})})))),l.a.createElement("section",null,l.a.createElement(T,{route:this.props.route,dispatchId:this.props.data.id}))):l.a.createElement("div",null,"Loading...")}}]),a}(n.Component),T=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(r.a)(this,Object(m.a)(a).call(this,e))).sendTextMessage=function(e){e.preventDefault(),console.log("debug",t.props),console.log("dispatchid",t.props.dispatchId);var a=new FormData;a.append("phone","8438021417");var n={method:"POST",body:a};fetch("".concat("https://efficient-emergency.herokuapp.com/","api/sendtext/").concat(t.props.dispatchId,"/er/"),n).then(function(e){return e.text()}).then(function(e){console.log("fetch response completed")})},t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"er-buttons"},l.a.createElement("div",{className:"er-buttons"},l.a.createElement(p.a,{className:"send-to-field btn btn-secondary"},"Send To Prisma Trauma ",l.a.createElement("p",{className:"er-phone"},"864-111-2222")),l.a.createElement(p.a,{className:"send-to-field btn btn-secondary",onClick:this.sendTextMessage},"Send To GC EMS ",l.a.createElement("p",{className:"er-phone"},"864-802-1417")),l.a.createElement(p.a,{className:"send-to-field btn btn-secondary"},"Send To Thorne Ambulance ",l.a.createElement("p",{className:"er-phone"},"864-555-7777"))))}}]),a}(n.Component),D=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(r.a)(this,Object(m.a)(a).call(this,e))).handleClose=function(e){t.setState({active:!1})},t.handleToggle=function(e){t.setState({active:!t.state.active})},t.state={active:!1},t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){this.props.specificCall;var e=this.props.image;return l.a.createElement("div",null,l.a.createElement(b.a,{className:"img-thumbnail detail-images",src:e.image,onClick:this.handleToggle}),l.a.createElement(h.a,{className:"detail-modal-main",show:this.state.active,onHide:this.handleClose},l.a.createElement(h.a.Header,{closeButton:!0}," "),l.a.createElement(h.a.Body,null,l.a.createElement(b.a,{className:"detail-modal",src:e.image}))))}}]),a}(n.Component),x=function(e){function a(e){return Object(i.a)(this,a),Object(r.a)(this,Object(m.a)(a).call(this,e))}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"wrapper top"},l.a.createElement("div",{className:"blockcont"},l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"}),l.a.createElement("div",{className:"block"})))}}]),a}(n.Component),L=(n.Component,n.Component,t(76),t(80)),P=(window.$,function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(r.a)(this,Object(m.a)(a).call(this,e))).route=function(e,a){window.history.pushState({},"",e),t.setState({data:a}),console.log("data",a)},t.state={data:{}},t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this,a=window.location.pathname;return console.log(a),l.a.createElement(L.a,{className:"Fluid"},l.a.createElement("div",{className:"mainheart"},l.a.createElement(x,null)),function(){var t=/\/dispatchcall\/(\d+)\/er\//.exec(a);return t?l.a.createElement(I,{route:e.route,pk:t[1],data:e.state.data}):(t=/\/dispatchcall\/(\d+)\/scene\//.exec(a))?l.a.createElement(O,{route:e.route,handleImage:e.handleImage,imageCollection:e.state.imageCollection,submitImage:e.submitImage,image:e.state.image,image_preview:e.state.image_preview,dispatchCallId:t[1]}):(t=/\/dispatchcall\/(\d+)\//.exec(a))?l.a.createElement(I,{route:e.route,pk:t[1],data:e.state.data}):(t=/\/dispatchcall\//.exec(a))?l.a.createElement(v,{route:e.route}):(t=/\/callCreate\//.exec(a))?l.a.createElement(y,{route:e.route,imageCollection:e.state.imageCollection,image_preview:e.state.image_preview}):void 0}())}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[46,1,2]]]);
//# sourceMappingURL=main.378a3e82.chunk.js.map